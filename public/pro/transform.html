<script src="../lib/createjs/easeljs-NEXT.min.js"></script>
<script>
	window.onload = function(){
		var stage = new createjs.Stage(document.getElementById('gameCanvas'));
		var rect = new createjs.Shape();
		rect.graphics.beginStroke('#F00').drawRect(0,0,200,100);
		rect.rotation = 30;
		rect.x = 200;
		rect.y = 50;
		rect.scaleY = 0.9;
		stage.addChild(rect);
		stage.update();
		var p = {x:270, y:190};
		var ctx = stage.canvas.getContext('2d');
		ctx.save();
		ctx.fillStyle = 'blue';
		ctx.fillRect(p.x,p.y,2,2);
		ctx.restore();
		
	}
	
	var hitPoint = function(o, x, y){
		var stage = App.stage,
			mtx1 = o.getConcatenatedMatrix(),
			mtx2 = new createjs.Matrix2D();
		mtx2.appendTransform(x/stage.scaleX, y/stage.scaleY, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, 0,0);
		mtx1.invert();
		mtx2.invert();
		var w = o.getMeasuredWidth(),
		 	h = o.getMeasuredHeight(),
			dx = mtx1.tx-mtx2.tx,
			dy = mtx1.ty-mtx2.ty;
		return !!(dx>=0&&dx<=w&&dy>0&&dy<h);
	}
</script>
<canvas style="width:800px;height:480px;border:1px black solid;" width=800 height=480 id="gameCanvas"></canvas>